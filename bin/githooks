#! /usr/bin/env ruby

$: << File.expand_path('../../lib', __FILE__)

require 'githooks/main'

if ARGV.size < 1
  puts <<EOF
Usage:

  githooks <command> [options...]

  commands:
    - githooks list-all
    - githooks run <hook-name>
    - githooks fetch github.com/<username>/<repo>/<path/to/hook/dir>
    - githooks install <hook-name>
    - githooks install github.com/<username>/<repo>/<path/to/hook/dir>

EOF

  exit 1
end

begin
  Githooks::Main.exec(*ARGV.dup)
rescue Githooks::AppError => e
  puts e.message
  puts
  puts e.usage
  exit 1
end
